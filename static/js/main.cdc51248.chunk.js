(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,t,n){},29:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),i=n(16),r=n.n(i),a=(n(37),n(10)),l=(n(38),n(3)),s=n(12),u=(n(39),n(2)),j=function(){return Object(u.jsx)("nav",{className:"navbar-container",children:Object(u.jsxs)("ul",{className:"ul-list",children:[Object(u.jsx)("li",{children:Object(u.jsx)(s.b,{className:"nav-link",to:"/",children:"Search Book"})}),Object(u.jsx)("li",{children:Object(u.jsx)(s.b,{className:"nav-link",to:"/collections",children:"Collections"})})]})})},d=function(){return Object(u.jsx)("header",{children:Object(u.jsx)(j,{})})},b=n(15),O=n.n(b),f=n(26),h=n(4),x=(n(47),n(19)),v=function(e){return"http://openlibrary.org/search.json?q=".concat(e)},k=function(e){return e?"http://covers.openlibrary.org/b/olid/".concat(e,"-M.jpg"):"https://cdn.pixabay.com/photo/2016/10/14/16/39/book-1740515_960_720.png"},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return fetch(v(e)).then((function(e){return e.json()}))},p=function(e,t){return localStorage.setItem(e,JSON.stringify(t))||[]},g=function(e){return JSON.parse(localStorage.getItem(e))||[]},y=n(9),C=(n(48),function(e){var t=e.title,n=e.img,o=e.year,i=e.dataHook,r=e.bookKey,a=e.addBookToCollection,l=e.collections,s=e.collectionSelected,j=Object(c.useState)(!1),d=Object(h.a)(j,2),b=d[0],O=d[1];return Object(u.jsxs)("div",{className:"card-container","data-hook":i,children:[Object(u.jsx)("div",{className:"img-container",children:Object(u.jsx)("img",{src:n,alt:"book card"})}),Object(u.jsxs)("div",{className:"card-content",children:[Object(u.jsx)("div",{className:"card-title",children:Object(u.jsx)("h6",{children:t})}),Object(u.jsx)("div",{className:"card-year",children:Object(u.jsx)("h6",{children:o})}),b?Object(u.jsx)("div",{id:"select-collection",children:Object(u.jsxs)("select",{onChange:function(e){return a(e,r)},title:"select collection","data-hook":"select-".concat(i),value:s,children:[Object(u.jsx)("option",{value:"select collection",children:"select collection"}),l.map((function(e,t){return Object(u.jsx)("option",{onChange:function(){return O(!b)},"data-hook":"option-".concat(t,"-").concat(i),value:e.name,children:e.name},e.id)}))]})}):Object(u.jsx)(y.f,{onClick:function(){return O(!b)}})]})]})}),N=n(20);n(49);N.a.configure();var S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top-right",c={autoClose:3e3,position:n,pauseOnHover:!0,draggable:!0},o=function(){N.a.success("".concat(t),c)},i=function(){N.a.error("".concat(t),c)};return Object(u.jsx)(u.Fragment,{children:e?o():i()})},B=(n(29),function(e){var t=e.book,n=e.books,o=e.bookKey,i=e.dataHook,r=e.collections,a=k(t.cover_edition_key),l=Object(c.useState)(""),s=Object(h.a)(l,2),j=s[0],d=s[1];return Object(u.jsx)("div",{className:"books-item-container",children:n.length>0?Object(u.jsx)(C,{title:t.title,img:a,year:t.first_publish_year,dataHook:i,bookKey:o,addBookToCollection:function(e,t){var c=e.target.value;if(d(c),r.length<0)return S(!1,"Create Collection First ");var o=r.find((function(e){return e.name===c})),i=n.find((function(e){return e.key===t}));return i?o.books.some((function(e){return e.key===t}))?S(!1,"Book Already Exist In Collection "):(o.books.push(i),p("collections",r),void S(!0,"the book added successfuly to ".concat(o.name," collection"))):alert(!1,"Book Not Found :(")},collections:r,collectionSelected:j}):null})}),F=function(e){var t=e.books,n=void 0===t?[]:t,o=Object(c.useState)([]),i=Object(h.a)(o,2),r=i[0],a=i[1];return Object(c.useEffect)((function(){!function(){var e=g("collections");0!==(null===e||void 0===e?void 0:e.length)&&a(e)}()}),[]),Object(u.jsx)("div",{"data-hook":"all-books",className:"book-list-container",children:(null===n||void 0===n?void 0:n.length)>0?n.map((function(e,t){return Object(u.jsx)(B,{dataHook:"book-".concat(t),book:e,books:n,bookKey:e.key,collections:r,setCollections:a},t)})):"no results"})},A=function(){var e=Object(c.useState)(""),t=Object(h.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)([]),r=Object(h.a)(i,2),a=r[0],l=r[1],s=Object(c.useState)(!1),j=Object(h.a)(s,2),d=j[0],b=j[1],v=function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),b(!0),e.next=4,k(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(f.a)(O.a.mark((function e(t){var n,c,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:(null===(c=e.sent)||void 0===c||null===(n=c.docs)||void 0===n?void 0:n.length)>0?(o=c.docs,b(!1),l(o)):(b(!1),l([]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("section",{children:[Object(u.jsx)("div",{className:"search-contaitner",children:Object(u.jsxs)("div",{className:"search-input-contaitner",children:[Object(u.jsx)("input",{type:"text",className:"search-input",onChange:function(e){o(e.target.value)}}),Object(u.jsx)(x.b,{className:"search-icon",onClick:v})]})}),d?"loading ...":Object(u.jsx)(F,{books:a})]})},w=n(32),T=(n(23),n(52)),_=function(e){var t=e.setCollections,n=e.collections,o=Object(c.useState)(""),i=Object(h.a)(o,2),r=i[0],a=i[1];return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{style:{textAlign:"center"},children:"Add collection"}),Object(u.jsxs)("div",{className:"add-collection-input",children:[Object(u.jsx)("input",{type:"text",value:r,placeholder:"Add New Collection",onChange:function(e){a(e.target.value)},"data-hook":"add-collection-input"}),Object(u.jsx)(x.a,{className:"add-icon",onClick:function(){return function(){var e=n.some((function(e){return e.name===r}));if(!r)return alert("no value");if(e)return alert("exist");var c={id:Object(T.a)(),name:r,books:[]};t([].concat(Object(w.a)(n),[c])),a("")}()}})]})]})},I=n(17),E=n(27),H=function(e){var t=e.olid;return Object(u.jsx)("img",{src:k(t),width:"50px",height:"50px",alt:"collection-list-img"})},J=function(e){var t,n=e.collections,o=e.collection,i=e.setCollections,r=Object(c.useState)(o),l=Object(h.a)(r,2),s=l[0],j=l[1],d=Object(c.useState)(!1),b=Object(h.a)(d,2),O=b[0],f=b[1],x=Object(c.useState)(!1),v=Object(h.a)(x,2),k=v[0],m=v[1],p=Object(c.useState)(!1),g=Object(h.a)(p,2),C=g[0],N=g[1],B=Object(c.useState)(""),F=Object(h.a)(B,2),A=F[0],w=F[1],T=function(e,t){var c=e.target.value;if((null===n||void 0===n?void 0:n.length)<0)return S(!1,"Create Collection First ");var r=n.find((function(e){return e.id===c})),l=r.books.some((function(e){return e.key===t}));if(console.log("collectionToAdd",r),console.log("isBookAlreadyInCollection",l),l)return S(!1,"Book Already Exist In Collection ");var u=o.books.find((function(e){return e.key===t}));if(!u)return S(!1,"Book Not Found :(");var d=o.books.filter((function(e){return e.key!==t}));r.books.push(u);var b=Object(a.a)(Object(a.a)({},s),{},{books:d}),O=n.map((function(e){return e.id===o.id?b:e}));j(b),i(O),N(!C)};return Object(u.jsxs)("div",{className:"collections-list-container",children:[Object(u.jsxs)("div",{className:"collection-item-container",children:[k?Object(u.jsxs)("div",{className:"collection-item-edit",children:[Object(u.jsx)("input",{name:"name",value:s.name,onChange:function(e){return function(e){j(Object(a.a)(Object(a.a)({},s),{},Object(I.a)({},e.target.name,e.target.value)))}(e)},"data-hook":"edit-name-input"}),Object(u.jsx)(y.g,{style:{cursor:"pointer"},onClick:function(){return function(){if(""===s.name)return S(!1,"The value is empty. You need to insert a collection name");if(n.some((function(e){return e.name===s.name})))return S(!1,"This name already exists. Try to choose another name");var e=n.map((function(e){return e.id===o.id?s:e}));i(e),m(!1),S(!0,"Collection is Updated")}()}})]}):Object(u.jsx)("span",{style:{fontWeight:"bold"},children:o.name}),Object(u.jsxs)("div",{className:"collection-item-icon",children:[Object(u.jsx)(y.c,{style:{cursor:"pointer"},"data-hook":"edit-icon",onClick:function(){m(!k)}}),Object(u.jsx)(E.a,{style:{cursor:"pointer"},"data-hook":"delete-icon",onClick:function(){return function(e){console.log(e);var t=n.filter((function(t){return t.id!==e}));i(t)}(o.id)}}),O?Object(u.jsx)(y.b,{onClick:function(){return f(!O)},style:{cursor:"pointer"}}):Object(u.jsx)(y.a,{onClick:function(){return f(!O)},style:{cursor:"pointer"}})]})]}),O?Object(u.jsx)("div",{children:0===o.books.length?Object(u.jsx)("div",{children:"No book Add"}):C?Object(u.jsxs)("select",{onChange:function(e){return T(e,A)},children:[Object(u.jsx)("option",{value:"select collection",children:"select collection"}),n.map((function(e,t){return Object(u.jsx)("option",{value:e.id,children:e.name},t)}))]}):Object(u.jsx)(u.Fragment,{children:null===(t=o.books)||void 0===t?void 0:t.map((function(e,t){return Object(u.jsxs)("div",{className:"collection-book-data-container",children:[Object(u.jsx)(H,{olid:e.cover_edition_key}),Object(u.jsx)("option",{onChange:T,className:"collection-books-data",value:e.title,children:e.title}),Object(u.jsx)(y.d,{style:{cursor:"pointer"},onClick:function(){N(!C),w(e.key)}}),Object(u.jsx)(E.a,{style:{cursor:"pointer"},"data-hook":"delete-icon",onClick:function(){return function(e){var t=o.books.filter((function(t){return t.key!==e})),c=Object(a.a)(Object(a.a)({},s),{},{books:t}),r=n.map((function(e){return e.id===o.id?c:e}));console.log(r),j(c),i(r)}(e.key)}})]},t)}))})}):null]})},K=n(31),L=function(){return Object(u.jsx)("div",{children:"Grid"})},M=function(){var e=g("collections"),t=Object(c.useState)(!1),n=Object(h.a)(t,2),o=n[0],i=n[1],r=Object(c.useState)(e),a=Object(h.a)(r,2),l=a[0],s=a[1];return Object(c.useEffect)((function(){0!==e.length&&s(e||[])}),[]),Object(c.useEffect)((function(){p("collections",l)}),[l]),Object(u.jsxs)("div",{className:"f1-collection-container",children:[Object(u.jsx)(_,{setCollections:s,collections:l}),Object(u.jsxs)("div",{className:"collections-display-data-container",children:[Object(u.jsx)(y.e,{onClick:function(){return i(!o)}}),Object(u.jsx)(K.a,{onClick:function(){return i(!o)},id:"collection-display-grid-icon"})]}),o?Object(u.jsx)(L,{}):Object(u.jsx)("div",{children:l.map((function(e,t){return Object(u.jsx)(J,{collection:e,collections:l,setCollections:s,isListMode:o},t)}))})]})};var D=function(){return Object(u.jsxs)("main",{className:"App",children:[Object(u.jsx)(d,{}),Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{exact:!0,path:"/",render:function(e){return Object(u.jsx)(A,Object(a.a)({},e))}}),Object(u.jsx)(l.a,{exact:!0,path:"/collections",render:function(e){return Object(u.jsx)(M,Object(a.a)({"data-hook":"collections-link"},e))}})]})]})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),i(e),r(e)}))};r.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(s.a,{basename:"/books",children:Object(u.jsx)(D,{})})}),document.getElementById("root")),P()}},[[50,1,2]]]);
//# sourceMappingURL=main.cdc51248.chunk.js.map